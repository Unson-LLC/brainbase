# 標準コミット実行

現在の変更を CLAUDE.md のコミットルールに従ってコミットします。
**SNS投稿のネタになるよう「悩み→判断→結果」の過程も記録する。**

## 実行手順

1. **ブランチ確認**（最重要）
   - `git branch --show-current` で現在のブランチを確認
   - `session/*` ブランチ → そのままコミット（正常）
   - `main` ブランチ → ユーザーに確認（下記参照）

2. **mainブランチの場合の確認**
   - セッション内でmainにいる場合 → 警告を出す
   - 許容ケース: 緊急hotfix、軽微修正、CI/CD設定変更
   - 判断できない場合はユーザーに「mainに直接コミットしますか？」と確認

3. `git status` で変更ファイルを確認
4. `git diff --stat HEAD` で変更量を確認
5. **会話の文脈から以下を抽出:**
   - **悩み**: 何に悩んだか（トレードオフ、選択肢の比較、迷い）
   - **判断**: なぜその判断をしたか（理由、根拠、決め手）
   - **結果**: どうなったか、何が変わったか
6. コミットメッセージを生成:
   - type: feat/fix/docs/refactor/chore/style から選択
   - summary: 50文字以内で要約
   - 悩み→判断: 思考過程（あれば）
   - why: 変更の意図・背景
   - what: 主な変更点（変更が多い場合）
7. `git add -A && git commit` を実行
8. 結果を報告

## コミットメッセージフォーマット

```
<type>: <summary>

悩み→判断:
- 何に悩んだか（例：AとBどちらを採用するか）
- なぜこの判断をしたか（例：〜の理由でAを選択）
（※思考過程がある場合のみ。単純な修正では省略可）

なぜ:
- 変更の意図・背景

変更:
- 主な変更点（多い場合のみ）

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

## 注意事項

- 秘密情報（.env, credentials等）が含まれていないか確認
- 変更が大きすぎる場合は分割を提案
- コミット後は `git status` で確認
