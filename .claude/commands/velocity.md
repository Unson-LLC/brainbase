# 開発速度分析（Velocity）

Gitログから開発速度を分析し、改善点を特定します。

## 実行手順

1. **直近1週間のコミット統計**
   ```bash
   echo "=== 直近1週間 ==="
   git log --since="1 week ago" --oneline | wc -l
   git log --since="1 week ago" --shortstat | grep -E "^\s*[0-9]+ file" | awk '{files+=$1; ins+=$4; del+=$6} END {print "Files:", files, "Insertions:", ins, "Deletions:", del}'
   ```

2. **貢献者別統計**
   ```bash
   echo "=== 貢献者別（直近1ヶ月）==="
   git shortlog -sn --since="1 month ago"
   ```

3. **コミットメッセージ品質チェック**
   ```bash
   echo "=== 曖昧なコミット（要改善）==="
   git log --since="1 week ago" --oneline | grep -E "^[a-f0-9]+ (fix|update|修正|変更)$"
   ```

4. **大きすぎるコミット検出**
   ```bash
   echo "=== 大規模コミット（300行超）==="
   git log --since="1 week ago" --shortstat --oneline | awk '/^[a-f0-9]/{commit=$0} /insertion|deletion/{if($4+$6>300) print commit, "->", $4+$6, "lines"}'
   ```

## ベンチマーク（SalesTailor基準）

| 指標 | 目標値 | 計算方法 |
|------|--------|----------|
| コミット頻度 | 5+/日 | 週間コミット数 / 5 |
| 平均変更行数 | <300行 | 総変更行数 / コミット数 |
| 曖昧コミット率 | <5% | 曖昧コミット / 全コミット |
| 追跡可能率 | >80% | REQ/BUG付きコミット / 全コミット |

## 改善アクション

### コミット頻度が低い場合
- `/atomic` で小さくコミットする習慣をつける
- `/wip` で作業途中も保存する

### 平均変更行数が大きい場合
- 機能を小さく分割して実装
- 1PR = 1機能を徹底

### 曖昧コミットが多い場合
- コミットメッセージテンプレートを使う
- 「何を・なぜ」を必ず含める

### 追跡可能率が低い場合
- `/req` で要件番号を採番してから開発
- ブランチ名にREQ/BUG番号を含める

## レポート出力例

```
📊 開発速度レポート（2025-12-01 〜 2025-12-06）
============================================
コミット数: 45
貢献者: 2名
平均コミット/日: 9.0

📈 品質指標
- 平均変更行数: 156行 ✅
- 曖昧コミット率: 2.2% ✅
- 追跡可能率: 87% ✅

🎯 改善提案
- 特になし。良いペースを維持。
```
