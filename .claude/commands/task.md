# タスク実行準備コマンド

指定されたタスクIDのメタ情報を収集し、タスク実行の準備を整える。

## 引数
- `$ARGUMENTS`: タスクID（例: ST-EMAIL-POLICY-20251128）

## 実行手順

### 1. タスク情報の取得
`_tasks/index.md` から該当タスクIDのセクションを抽出：
- id, title, project_id, status, owner, priority, due, tags, links
- ログ（履歴コメント）

**statusがdoneの場合は警告を出す**

### 2. プロジェクトコンテキストの取得（メイン）
`mcp__brainbase__get_context(topic: project_id)` を実行。

これで自動的に取得されるもの：
- **Primary Entity**: project.md の全内容（01_strategy〜05_kpi）
- **Related Entities**:
  - team[] に紐づく全メンバーの情報（役割、経歴、権限）
  - orgs[] に紐づく組織のMVV
  - project_id に紐づくRACI表

### 3. 特殊ケース: links の読み込み（補助）
linksが空でない場合のみ：
- ファイルパス → Read で読み込み（最大5件）
- URL → WebFetch で内容取得

linksが必要なケース：
- 外部URL（Xツイート、論文、外部ドキュメント）
- _codex外のファイル（別リポジトリの議事録など）

### 4. タスク理解の要約
収集した情報をもとに以下を整理して表示：

```
## タスク概要
- ID: <タスクID>
- タイトル: <title>
- プロジェクト: <project_id>
- 期限: <due>
- 優先度: <priority>
- 担当: <owner>

## プロジェクトコンテキスト
<project.mdから理解した背景・現状>

## 関連チーム
<RACI表から誰が関係者か>

## このタスクで達成すべきこと
<タスクの目的・ゴールの理解>

## 実行に必要な追加情報（あれば）
<不足している情報>
```

### 5. 不足情報の確認
タスク実行に必要だが不足している情報があれば質問：
- 具体的なゴール・成果物のイメージ
- 制約条件・スコープ
- 参照すべき追加資料
- 関係者への確認事項

### 6. 実行準備完了の報告
質問への回答を受けて、タスク実行の準備が整ったことを報告し、次のアクションを提案。

## 注意事項
- タスクIDが見つからない場合はエラーを返す
- MCPでproject_idのコンテキストが取れない場合は警告
- linksが多い場合（6件以上）は重要なものを確認して選択
