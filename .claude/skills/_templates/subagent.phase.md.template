---
name: phase{N}_{action}
description: {このPhaseの目的を1行で簡潔に記述}
tools:
  # 以下は利用可能なツールの例です。実際に使用するツールのみを残してください。
  # 最小構成例: [Read, Grep] (sns-smart Phase 1)
  # 標準構成例: [Read, Write, Skill, AskUserQuestion, Glob, Grep] (marketing-strategy-planner Phase 1)
  - Read        # ファイル読み込み（ほぼ必須）
  - Write       # ファイル書き込み（成果物生成時）
  - Grep        # コード検索（既存ファイル調査時）
  - Glob        # ファイル検索（パターンマッチ）
  - Skill       # 他Skillsの参照（思考フレームワーク活用時）
  - AskUserQuestion  # ユーザーへの質問（不足情報補完時）
  - Bash        # コマンド実行（スクリプト実行時）
skills: [{skill-1}, {skill-2}]  # 依存する思考フレームワークSkills
model: claude-sonnet-4-5-20250929  # 使用モデル（sonnet/opus/haiku）
---

# Phase {N}: {Phase Title}

**親Skill**: {parent-orchestrator-skill-name}
**Phase**: {N}/{総Phase数}
**使用Skills**: {skill-1}, {skill-2}

---

## Purpose

{このPhaseの目的を詳述}

**Why this Phase exists**:
- {理由1: なぜこのPhaseが必要か}
- {理由2: 前Phaseとの関係}
- {理由3: 次Phaseへの貢献}

**Key Responsibilities**:
1. {責任1}
2. {責任2}
3. {責任3}

---

## Context

### Input（前Phaseから受け取るデータ）

**前Phase**: Phase {N-1} - {前Phaseの名前}

**必須データ**:
```markdown
## {セクション名1}
{期待されるデータ形式}

## {セクション名2}
{期待されるデータ形式}
```

**任意データ**:
- {任意データ1}
- {任意データ2}

### 参照ファイル

**プロジェクト固有**:
- `{ファイルパス1}` - {ファイルの役割}
- `{ファイルパス2}` - {ファイルの役割}

**brainbase共通**:
- `_codex/{domain}/{file}.md` - {ファイルの役割}

---

## Thinking Framework

### {Skill-1} Skillの思考フレームワークを活用

{Skill-1}が提供する「{思考パターン名}」を使用して{タスク}を実行します：

**フレームワークの概要**:
1. **{フレームワーク要素1}**
   - {説明}
   - {適用方法}

2. **{フレームワーク要素2}**
   - {説明}
   - {適用方法}

3. **{フレームワーク要素3}**
   - {説明}
   - {適用方法}

**思考パターン**:
```
{状況} → 「{フレームワークの問いかけ}」
{判断基準} → 「{フレームワークの指針}」
```

### {Skill-2} Skillの思考フレームワークを活用

{Skill-2}が提供する「{思考パターン名}」を使用して{タスク}を実行します：

{...同様にフレームワークを記述...}

---

## Process

### Step 1: {ステップ1の名前}

**目的**: {ステップ1の目的}

**実行内容**:
```bash
# 1. {実行内容1}
{コマンド例}

# 2. {実行内容2}
{コマンド例}
```

**抽出する情報**:
- {情報1}
- {情報2}
- {情報3}

**思考パターン適用**:
- {Skill-1}の{フレームワーク要素1}を使用 → {判断}
- {Skill-2}の{フレームワーク要素2}を使用 → {判断}

---

### Step 2: {ステップ2の名前}

**目的**: {ステップ2の目的}

**実行内容**:
1. **{サブステップ1}**:
   - {詳細}
   - {期待結果}

2. **{サブステップ2}**:
   - {詳細}
   - {期待結果}

3. **{サブステップ3}**:
   - {詳細}
   - {期待結果}

**思考パターン適用**:
```
{入力} → {Skill-1フレームワーク} → {中間結果} → {Skill-2フレームワーク} → {最終結果}
```

---

### Step 3: {ステップ3の名前}（不足情報の特定とユーザーへの質問）

**必須項目**:
- {必須項目1}: {説明}
- {必須項目2}: {説明}
- {必須項目3}: {説明}

**不足している情報をユーザーに質問**:
- AskUserQuestion toolを使用
- 一度に複数の質問をまとめて行う
- デフォルト値は設定せず、必ず確認を取る

**質問例**:
```
Q1: {質問1}
Q2: {質問2}
Q3: {質問3}
```

---

### Step 4: {ステップ4の名前}（最終出力生成）

**ファイル構造**:
```markdown
# {出力のタイトル}

**作成日**: {YYYY-MM-DD}
**Phase**: {N}/{総Phase数}

## {セクション1}
{内容...}

## {セクション2}
{内容...}

---

{追加情報}
```

**品質チェック**:
- {Skill-1}基準での適合率: XX%
- ✅ {チェック項目1}
- ✅ {チェック項目2}
- ✅ {チェック項目3}

---

## Output Format

以下の形式で出力してください（**markdown見出しを厳守**）：

```markdown
# Phase {N} 実行結果: {Phase Title}

## {セクション1}

{Phase {N}の主要な出力データ}

**{サブセクション1-1}**:
{詳細データ}

**{サブセクション1-2}**:
{詳細データ}

## {セクション2}

{Phase {N}の補助的な出力データ}

### {サブセクション2-1}
{詳細データ}

### {サブセクション2-2}
{詳細データ}

## {セクション3}（次Phaseへの引き継ぎ）

**次Phase**: Phase {N+1} - {次Phaseの名前}

**引き継ぎデータ**:
- {データ1}: {値}
- {データ2}: {値}
- {データ3}: {値}

---

この分析結果をPhase {N+1}（{次Phaseの名前}）に引き継ぎます。
```

**重要な注意事項**:
1. **markdown見出し構造の厳守**: 次Phaseがこの構造を期待しています
2. **必須セクション**: `## {セクション1}`, `## {セクション2}`, `## {セクション3}` は必須
3. **引き継ぎデータの明記**: 次Phaseで使用するデータを明示的にリスト化

---

## Important Notes

### 1. {重要ポイント1のタイトル}

{重要ポイント1の説明}

**Why**:
- {理由1}
- {理由2}

**How**:
- {方法1}
- {方法2}

**Example**:
```
{良い例}
```

---

### 2. {重要ポイント2のタイトル}

{重要ポイント2の説明}

**Why**:
- {理由1}
- {理由2}

**How**:
- {方法1}
- {方法2}

**Bad Example**:
```
{悪い例}
```

---

### 3. Skillsの思考フレームワーク活用

**原則**: Skillsは「HOW to think」として使用する

{Skill-1}と{Skill-2}の思考フレームワークを明示的に適用し、以下を実現：
- {実現内容1}
- {実現内容2}
- {実現内容3}

---

## Success Criteria

Phase {N}の成功条件：

- [ ] {必須条件1}
- [ ] {必須条件2}
- [ ] {必須条件3}
- [ ] {品質条件1}（例: XX%以上の適合率）
- [ ] {品質条件2}
- [ ] {出力条件1}（markdown見出し構造が正しい）
- [ ] {出力条件2}（引き継ぎデータが明記されている）

**検証方法**:
1. {検証方法1}
2. {検証方法2}
3. {検証方法3}

---

## Expected Input

### 前Phase（Phase {N-1}）からの出力

```markdown
## {前Phaseのセクション1}
{期待されるデータ}

## {前Phaseのセクション2}
{期待されるデータ}
```

### ユーザーからの追加入力（AskUserQuestionで取得）

- **{質問1}**: {期待される回答}
- **{質問2}**: {期待される回答}
- **{質問3}**: {期待される回答}

---

## Expected Output

### Phase {N}の出力サマリー

```markdown
# Phase {N}: {Phase Title} 実行結果

## 生成データ概要

**{指標1}**: X個
**{指標2}**: Y%
**{指標3}**: Z件

## 品質チェック結果

{Skill-1}基準での適合率: XX%

✅ {チェック項目1}
✅ {チェック項目2}
✅ {チェック項目3}

---

Phase {N+1}へ渡すデータ:
- {データ1}: {値}
- {データ2}: {値}
- {データ3}: {値}
```

---

## Skills Integration

このSubagentは以下のSkillsを使用します：

### {Skill-1}（必須）

**使用方法**:
- Skillの思考フレームワークを{タスク}の基準として適用
- {フレームワーク要素1}を使用
- {フレームワーク要素2}を使用

**期待される効果**:
- {効果1}
- {効果2}
- {効果3}

### {Skill-2}（参照用）

**使用方法**:
- {使用方法1}
- {使用方法2}

**期待される効果**:
- {効果1}
- {効果2}

---

## Troubleshooting

### {問題1のタイトル}

**原因**:
- {原因1}
- {原因2}

**対処**:
1. {対処手順1}
2. {対処手順2}
3. {対処手順3}

**Example**:
```bash
# {対処コマンド例}
```

---

### {問題2のタイトル}

**原因**:
- {原因1}
- {原因2}

**対処**:
- {対処方法1}
- {対処方法2}

**Fallback**:
- {フォールバック方法}

---

### 前Phaseのデータが不足している

**症状**: {症状の説明}

**原因**:
- Phase {N-1}のSuccess Criteriaが未達成
- markdown見出し構造の不一致

**対処**:
1. Phase {N-1}の出力を確認
2. 必須セクションが存在するか確認
3. データ形式が期待通りか確認

---

## 次のステップ

Phase {N+1} Subagent（phase{N+1}_{action}.md）へ:
- {引き継ぎデータ1}を渡す
- {引き継ぎデータ2}を渡す
- {引き継ぎデータ3}を渡す
- Phase {N+1}で{次Phaseのタスク}

---

**最終更新**: {YYYY-MM-DD}
**作成者**: {作成者名}
**親Orchestrator**: {parent-orchestrator-skill-name}
**Phase番号**: {N}/{総Phase数}
