---
name: ship-management
description: brainbaseにおけるシップ（出荷物）管理のルール。ステータスフロー、Ship種別一覧、North Star指標、タスクとの紐付け（N:1）を説明。シップを作成・更新する際に使用。
---

## Triggers

以下の状況で使用：
- 新規シップを作成するとき
- シップのステータスを更新するとき
- Ship種別を選択するとき
- タスクとシップを紐付けるとき
- North Star指標（shipped_output_count / sprint）を確認したいとき

# シップ管理ルール

## 1. シップとは何か

**「チームが外に出したもの」を1行で記録する。**

コードのリリース、請求書の送付、契約の締結、キャンペーンの配信——形は違っても「完了して外に出した」という点では同じ。

### タスクとシップの違い

|  | タスク | シップ |
|--|--------|--------|
| **視点** | やること（Input） | 出したもの（Output） |
| **タイミング** | 着手前〜作業中に登録 | 出荷予定時にplannedで登録、出荷時にshipped |
| **粒度** | 1日〜数日の個別作業 | 複数タスクの集合体（成果物単位） |
| **例** | 「ログイン画面を実装する」 | 「認証機能v1リリース」 |

**原則**: タスクは「やるべきこと」、シップは「やった結果」。

---

## 2. North Star指標

シップテーブルの最重要指標は **1スプリントあたりのshipped数**。

```
North Star = shipped ステータスのシップ数 / スプリント期間
```

- この数値が「チームのアウトプット速度」を表す
- 速度が落ちたら → ブロッカーがある or タスク粒度が大きすぎる
- 速度が安定してきたら → チームのリズムが回っている

**計測方法**: manaが週次サマリー（M9）で自動集計し、Slackに投稿。

---

## 3. ステータスフロー

```
planned → in_progress → in_review → shipped → verified
    │                       │
    └───────────────────────┘
          （戻る場合もあり）
```

| ステータス | 意味 | 次のアクション |
|-----------|------|---------------|
| **planned** | 出荷予定として登録済み。まだ着手していない | タスクを紐付けて作業開始 |
| **in_progress** | 出荷に向けて作業中 | タスクを進める |
| **in_review** | レビュー・確認待ち | レビュー対応 |
| **shipped** | 出荷完了 | `出荷日`と`証跡URL`を**必ず**記入 |
| **verified** | 出荷後の効果確認済み | Learn として振り返りに記録 |

### shipped時の必須入力

shippedステータスにする場合、以下が**必須**：

1. **出荷日**（shipped_at）: 出荷完了日時
2. **証跡URL**: PRリンク・納品書URL・メール送信記録等

**これがないシップはNorth Star指標にカウントしない。**

---

## 4. Ship種別一覧

### 開発・プロダクト系

| 種別 | 使うとき | 例 |
|------|---------|-----|
| `feature_released` | 新機能をリリースした | ユーザー登録フロー完成 |
| `improvement_released` | 既存機能を改善した | レスポンス速度30%改善 |
| `bugfix_released` | バグを修正した | セッションタイムアウト修正 |
| `message_type_deployed` | Botのメッセージタイプを追加した | 週次レポート通知追加 |
| `maintenance_resolved` | 運用課題を解決した | バックアップ設定完了 |

### 営業・マーケ系

| 種別 | 使うとき | 例 |
|------|---------|-----|
| `campaign_delivered` | キャンペーン・メール配信した | フォローアップメール一括配信 |
| `sales_material_delivered` | 営業資料・提案書を納品した | 技術提案書v2提出 |
| `contract_executed` | 契約を締結した | 新規受託案件契約締結 |

### バックオフィス系

| 種別 | 使うとき | 例 |
|------|---------|-----|
| `invoice_sent` | 請求書を送付した | 1月分請求書一括送付 |
| `vendor_paid` | 仕入先に支払いした | サーバー費用支払い |
| `expense_reimbursed` | 経費精算を完了した | Q4経費精算完了 |
| `month_close_done` | 月次決算を締めた | 12月月次締め完了 |
| `tax_filed` | 税務申告を完了した | 消費税申告完了 |

---

## 5. タスクとシップの接続（N:1）

複数のタスクが1つのシップに紐付く。これにより「何をやったら何が出荷されたか」が追跡できる。

```
[タスク] ログイン画面実装 ──┐
[タスク] パスワードリセット ──┼──→ [シップ] 認証機能v1リリース
[タスク] テスト作成 ─────────┘
```

### 紐付け方法

タスク側の `Ship紐付け` カラムでシップを参照する。

```
# タスク更新でシップ紐付け
mcp__nocodb__nocodb_update_record
  baseId: "pva7l2qlu6fdfip"
  tableName: "タスク"
  recordId: "456"
  fields: {
    "シップ_id": 123  # シップのレコードID
  }
```

シップ側からは `タスクs` ロールアップで紐付きタスク数・完了率が見える。

---

## 6. 出荷オーダー（運用フロー）

### Step 1: シップをplannedで作成

「何を出荷するか」を宣言する。

```
mcp__nocodb__nocodb_create_record
  baseId: "pva7l2qlu6fdfip"
  tableName: "シップ"
  fields: {
    "タイトル": "認証機能v1リリース",
    "Ship種別": "feature_released",
    "ステータス": "planned",
    "担当者": "keigo"
  }
```

### Step 2: タスクをシップに紐付け

作業を開始するタスクを作成し、Ship紐付けを設定。

### Step 3: タスクを進める

タスクのステータスを「進行中」→「完了」に更新。
シップのステータスを「in_progress」に更新。

### Step 4: 全タスク完了 → シップをshipped

```
mcp__nocodb__nocodb_update_record
  baseId: "pva7l2qlu6fdfip"
  tableName: "シップ"
  recordId: "123"
  fields: {
    "ステータス": "shipped",
    "出荷日": "2026-01-27T15:00:00.000Z",
    "証跡URL": "https://github.com/Unson-LLC/brainbase/pull/123"
  }
```

### Step 5: GMが品質確認 → verified（任意）

出荷物がマイルストーンの達成条件に寄与しているか確認。

---

## 7. GMの品質確認チェックリスト

shippedになったシップを以下で確認：

- [ ] `出荷日`が入っているか
- [ ] `証跡URL`が入っているか（有効なURLか）
- [ ] 出荷物がマイルストーンの達成条件に寄与しているか
- [ ] 週次サマリー（M9）でシップ数を確認し、ペースが適切か

---

## 8. テーブル構造（詳細）

| カラム | 型 | 必須 | 説明 |
|--------|-----|------|------|
| **タイトル** | SingleLineText | Yes | 何を出荷したか（1行で簡潔に） |
| **Ship種別** | SingleSelect | Yes | 上記種別一覧参照 |
| **ステータス** | SingleSelect | Yes | planned/in_progress/in_review/shipped/verified |
| **担当者** | SingleLineText | - | 誰が出荷したか |
| **出荷日** | DateTime | shipped時Yes | shipped_at |
| **証跡URL** | SingleLineText | shipped時Yes | PRリンク・ドキュメントURL等 |
| **説明** | LongText | - | 補足情報（背景・インパクト等） |
| **相手先** | SingleLineText | - | 納品先・契約先 |
| **金額** | Number | - | 関連する金額 |
| **Sprint週** | SingleLineText | - | 該当Sprint週（例: W04） |
| **関連マイルストーン** | Link | - | このシップが寄与するマイルストーン |
| **タスクs** | Links | - | 紐付きタスク一覧（自動ロールアップ） |

---

## 9. よくある失敗パターン

**❌ shipped時に出荷日・証跡URLを入れ忘れる**
→ ✅ shippedにする時は必ず2つを入力

**❌ タスク完了とシップを混同する**
→ ✅ タスクは「やること」、シップは「外に出したもの」

**❌ シップをplannedで作らず、完了後に初めて記録する**
→ ✅ 先にplannedで宣言し、タスクを紐付けてから進める

**❌ Ship種別を適当に選ぶ**
→ ✅ 種別一覧から適切なものを選択（後の分析に影響）

---

## 10. 関連Skills

| Skill | 用途 |
|-------|------|
| **nocodb-4table-guide** | 4テーブル運用の全体像・MCP操作 |
| **sprint-management** | スプリントの週次運用 |
| **milestone-management** | マイルストーンの作成・更新 |

---

最終更新: 2026-01-27
